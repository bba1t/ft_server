
#### –ß—Ç–æ —Ç–∞–∫–æ–µ –∞–≤—Ç–æ–∏–Ω–¥–µ–∫—Å (Autoindex) –≤ Nginx?

**–ê–≤—Ç–æ–∏–Ω–¥–µ–∫—Å** - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è Nginx, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ –≤ –≤–∏–¥–µ –∫—Ä–∞—Å–∏–≤–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–¥–ø–∞–ø–æ–∫, –∫–æ–≥–¥–∞ –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ –Ω–µ—Ç —Ñ–∞–π–ª–∞ `index.html` –∏–ª–∏ `index.php`.

**–ü—Ä–∏–º–µ—Ä:** 
- –ë–µ–∑ –∞–≤—Ç–æ–∏–Ω–¥–µ–∫—Å–∞: `http://localhost/files/` ‚Üí 404 –æ—à–∏–±–∫–∞ –∏–ª–∏ "Forbidden"
- –° –∞–≤—Ç–æ–∏–Ω–¥–µ–∫—Å–æ–º: `http://localhost/files/` ‚Üí –∫—Ä–∞—Å–∏–≤—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ `/files/`

#### –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥ Nginx

**–§–∞–π–ª:** `/etc/nginx/sites-available/default`

–î–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ `location` –≤–Ω—É—Ç—Ä–∏ `server`:

```nginx
server {
    listen 80;
    server_name _;
    root /var/www/html;
    index index.html index.htm index.php;

    # üìÇ –ë–ª–æ–∫ –∞–≤—Ç–æ–∏–Ω–¥–µ–∫—Å–∞ - –î–û–ë–ê–í–¨–¢–ï –≠–¢–û
    location /autoindex/ {
        # üéØ –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∏–Ω–¥–µ–∫—Å
        autoindex on;
        
	    # –û—Ç–∫—É–¥–∞ –±—É–¥–µ—Ç –≤–∑—è—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª
	    alias /var/www/html/autoindex/;
	    
        # üìä –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (KB, MB)
        autoindex_exact_size off;
        
        # ‚è∞ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É
        autoindex_localtime on;
        
        # üé® –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ (html - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, xml, json)
        autoindex_format html;
    }

    # –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
    location / {
        try_files $uri $uri/ =404;
    }
}
```



#### –ê–≤—Ç–æ–∏–Ω–¥–µ–∫—Å –¥–ª—è –≤—Å–µ–π –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏
```nginx
server {
    listen 80;
    server_name _;
    root /var/www/html;
    
    # üìÇ –ê–≤—Ç–æ–∏–Ω–¥–µ–∫—Å –¥–ª—è –≤—Å–µ–π –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–∏ (–µ—Å–ª–∏ –Ω–µ—Ç index.html)
    autoindex on;
    autoindex_exact_size off;
    autoindex_localtime on;
    
    index index.html index.php;
}
```

#### –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–ø–æ–∫ —Å –∞–≤—Ç–æ–∏–Ω–¥–µ–∫—Å–æ–º
```nginx
location /downloads/ {
    autoindex on;
    alias /var/www/downloads/;
}

location /shared/ {
    autoindex on;
    alias /var/www/shared/;
    autoindex_format html;
}
```


#### **–†–µ—à–µ–Ω–∏–µ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞**

- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–∑–¥–∞—é –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞–ø–æ–∫ –∏ —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–±–æ—á–µ–π –∑–æ–Ω–µ: `/var/www/html`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é –∫–æ–Ω—Ñ–∏–≥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:¬†`/etc/nginx/sites-available/default`, –¥–æ–±–∞–≤–∏–≤ –±–ª–æ–∫¬†`location`¬†–≤–Ω—É—Ç—Ä–∏¬†`server`:

```dockerfile
FROM debian:buster

# –ó–∞–º–µ–Ω—è—é sources.list –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –¥–ª—è –∞—Ä—Ö–∏–≤–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
RUN echo "deb http://archive.debian.org/debian/ buster main" > /etc/apt/sources.list && \
    echo "deb http://archive.debian.org/debian-security buster/updates main" >> /etc/apt/sources.list

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Nginx
RUN apt-get update && apt-get install -y nginx

# üìÇ –°–û–ó–î–ê–ï–ú –°–¢–†–£–ö–¢–£–†–£ –ü–ê–ü–û–ö –∏ –¢–ï–°–û–í–´–ï –§–ê–ô–õ–´ –î–õ–Ø –ê–í–¢–û –ò–ù–î–ï–ö–°–ê–¶–ò–ò
RUN mkdir -p /var/www/html/autoindex
RUN mkdir -p /var/www/html/autoindex/subfolder
RUN echo "File 1 content" > /var/www/html/autoindex/file1.txt
RUN echo "File 2 content" > /var/www/html/autoindex/file2.txt
RUN echo "Subfolder file" > /var/www/html/autoindex/subfolder/file3.txt
RUN echo "<h1>Main Page</h1>" > /var/www/html/index.html

# üìÑ –°–û–ó–î–ê–ï–ú –ö–û–ù–§–ò–ì NGINX –° –ê–í–¢–û–ò–ù–î–ï–ö–°–û–ú
RUN cat <<EOF > /etc/nginx/sites-available/default
server {
	listen 80;
	root /var/www/html;  # –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
	index index.html;
	
	location /autoindex/ {
		autoindex on;
		autoindex_exact_size off;
		autoindex_localtime on;
		# alias –ù–ï –ù–£–ñ–ï–ù, —Ç.–∫. root —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ /var/www/html
	}

	location / {
		try_files \$uri \$uri/ =404;
	}
}
EOF

# üîó –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–∞–π—Ç (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ sites-available/enabled)
RUN ln -sf /etc/nginx/sites-available/default /etc/nginx/sites-enabled/

CMD ["nginx", "-g", "daemon off;"]
```

